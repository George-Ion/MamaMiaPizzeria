{% extends "layout.html" %}

{% block title %}Menu - Mamma Mia Pizza{% endblock %}

{% block content %}
<div class="card">
    <h2>🍕 Our Menu</h2>
    
    <!-- Menu Filters -->
    <div class="filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="vegetarian">Vegetarian 🌱</button>
        <button class="filter-btn" data-filter="vegan">Vegan 🌿</button>
    </div>

    <!-- Menu Categories -->
    <div class="menu-section">
        <h3>Pizzas</h3>
        <div class="menu-grid">
            {% for pizza in pizzas %}
            <div class="menu-item" 
                 data-vegetarian="{{ 'true' if pizza.is_vegetarian else 'false' }}"
                 data-vegan="{{ 'true' if pizza.is_vegan else 'false' }}">
                <div class="menu-item-header">
                    <h4>{{ pizza.name }}</h4>
                    <div class="menu-item-labels">
                        {% if pizza.is_vegetarian %}
                        <span class="vegetarian-label">🌱 Vegetarian</span>
                        {% endif %}
                        {% if pizza.is_vegan %}
                        <span class="vegan-label">🌿 Vegan</span>
                        {% endif %}
                    </div>
                </div>
                <p class="description">{{ pizza.description }}</p>
                <p class="ingredients">
                    {% for ingredient in pizza.ingredients %}
                    <span class="ingredient">{{ ingredient.name }}</span>
                    {% endfor %}
                </p>
                <p class="price">€{{ '%.2f'|format(pizza.final_price) }}</p>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="menu-section">
        <h3>Drinks</h3>
        <div class="menu-grid">
            {% for drink in drinks %}
            <div class="menu-item">
                <h4>{{ drink.name }}</h4>
                <p class="price">€{{ '%.2f'|format(drink.price) }}</p>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="menu-section">
        <h3>Desserts</h3>
        <div class="menu-grid">
            {% for dessert in desserts %}
            <div class="menu-item">
                <h4>{{ dessert.name }}</h4>
                <p class="price">€{{ '%.2f'|format(dessert.price) }}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const filterBtns = document.querySelectorAll('.filter-btn');
    const menuItems = document.querySelectorAll('.menu-item');

    filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            // Remove active class from all buttons
            filterBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            const filter = btn.dataset.filter;

            menuItems.forEach(item => {
                if (filter === 'all') {
                    item.style.display = 'block';
                } else if (filter === 'vegetarian') {
                    item.style.display = item.dataset.vegetarian === 'true' ? 'block' : 'none';
                } else if (filter === 'vegan') {
                    item.style.display = item.dataset.vegan === 'true' ? 'block' : 'none';
                }
            });
        });
    });
});
</script>
{% endblock %}